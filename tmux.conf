# Command prefix key
set-option -g prefix C-t
bind-key t send-prefix

# Basics
bind-key : command-prompt
bind-key ? list-keys
bind-key R source-file ~/.tmux.conf \; display-message "source-file done"

# Window management
bind-key C-c new-window
bind-key C-t last-window
bind-key C-n next-window
bind-key C-p previous-window
bind-key k confirm -p "kill-window? (y/n)" kill-window
bind-key , command-prompt -I "#W" "rename-window '%%'"
bind-key '"' split-window
bind-key o select-pane -t :.+
bind-key x kill-pane

# Behavior
set-window-option -g mode-keys vi
set-option -g history-limit 50000
# In order to set gnome-terminal's reported TERM value to something that
# supports 256 colors, you have to trick it by changing the profile's startup
# command to execute with "env" instead of "tmux":
# env TERM=xterm-256color /usr/bin/tmux
set-option -g default-terminal "screen-256color"
# Prevent escape key delay in tmux + vim.
set -s escape-time 0
# Workaround tmux+vim bug in macOS Sierra
set -g default-shell $SHELL
set -g default-command "login-shell"

# Appearance
set-option -ga terminal-overrides ",xterm-256color:Tc"
set-option -g status-bg colour18
set-option -g status-fg white
set-option -g status-justify centre
set-option -g status-left ""
set-option -g status-left-length 0
set-option -g status-right ""
set-option -g status-right-length 0
set-window-option -g window-status-format "#[bg=colour18]#[fg=colour20]#F#I #W"
set-window-option -g window-status-current-format "#[bg=colour18]#[fg=colour12]#F#I #W"
set-option -g message-bg black
set-option -g message-fg green
set-option -g message-command-bg black
set-option -g message-command-fg yellow
set-window-option -g mode-bg black
set-window-option -g mode-fg brightred

# Copy and paste
bind-key c copy-mode
bind-key p paste-buffer

# Copy mode bindings
bind-key -T copy-mode-vi C-c send -X cancel
bind-key -T copy-mode-vi q send -X cancel
bind-key -T copy-mode-vi Escape send -X cancel

bind-key -T copy-mode-vi d send -X cursor-left
bind-key -T copy-mode-vi h send -X cursor-down
bind-key -T copy-mode-vi t send -X cursor-up
bind-key -T copy-mode-vi n send -X cursor-right

bind-key -T copy-mode-vi Up send -X cursor-up
bind-key -T copy-mode-vi Down send -X cursor-down
bind-key -T copy-mode-vi Left send -X cursor-left
bind-key -T copy-mode-vi Right send -X cursor-right

bind-key -T copy-mode-vi C-Up send -X scroll-up
bind-key -T copy-mode-vi C-Down send -X scroll-down
bind-key -T copy-mode-vi C-b send -X page-up
bind-key -T copy-mode-vi C-f send -X page-down
bind-key -T copy-mode-vi PageUp send -X page-up
bind-key -T copy-mode-vi PageDown send -X page-down

bind-key -T copy-mode-vi Space send -X begin-selection
bind-key -T copy-mode-vi v send -X begin-selection
bind-key -T copy-mode-vi V send -X begin-selection
bind-key -T copy-mode-vi C-v send -X rectangle-toggle
bind-key -T copy-mode-vi Enter send -X copy-selection
bind-key -T copy-mode-vi y send -X copy-selection
bind-key -T copy-mode-vi K send -X copy-end-of-line

bind-key -T copy-mode-vi / command-prompt -i -p "search down" "send -X search-forward-incremental \"%%%\""
bind-key -T copy-mode-vi ? command-prompt -i -p "search up" "send -X search-backward-incremental \"%%%\""

bind-key -T copy-mode-vi 0 send -X start-of-line
bind-key -T copy-mode-vi ^ send -X back-to-indentation
bind-key -T copy-mode-vi '$' send -X end-of-line

bind-key -T copy-mode-vi w send -X next-word
bind-key -T copy-mode-vi b send -X previous-word
bind-key -T copy-mode-vi e send -X next-word-end
bind-key -T copy-mode-vi W send -X next-space
bind-key -T copy-mode-vi E send -X next-space-end
bind-key -T copy-mode-vi B send -X previous-space

bind-key -T copy-mode-vi g send -X history-top
bind-key -T copy-mode-vi G send -X history-bottom
bind-key -T copy-mode-vi : send -X goto-line

bind-key -T copy-mode-vi D send -X top-line
bind-key -T copy-mode-vi M send -X middle-line
bind-key -T copy-mode-vi N send -X bottom-line

bind-key -T copy-mode-vi j send -X search-again
bind-key -T copy-mode-vi J send -X search-reverse
